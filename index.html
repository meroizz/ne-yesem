<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ne Yesem? - Lezzet KeÅŸfi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="module">
        // Firebase SDK'larÄ±nÄ± import et ve global bir nesneye ata
        import { initializeApp as initializeAppFirebase } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth as getAuthFirebase, signInAnonymously as signInAnonymouslyFirebase, signInWithCustomToken as signInWithCustomTokenFirebase, onAuthStateChanged as onAuthStateChangedFirebase } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore as getFirestoreFirebase, doc as docFirebase, getDoc as getDocFirebase, addDoc as addDocFirebase, setDoc as setDocFirebase, updateDoc as updateDocFirebase, deleteDoc as deleteDocFirebase, onSnapshot as onSnapshotFirebase, collection as collectionFirebase, query as queryFirebase, where as whereFirebase, getDocs as getDocsFirebase, serverTimestamp as serverTimestampFirebase } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        // import { setLogLevel as setLogLevelFirebase } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"; // setLogLevel iÃ§in doÄŸru import

        window.firebaseSDK = {
            initializeApp: initializeAppFirebase,
            getAuth: getAuthFirebase,
            signInAnonymously: signInAnonymouslyFirebase,
            signInWithCustomToken: signInWithCustomTokenFirebase,
            onAuthStateChanged: onAuthStateChangedFirebase,
            getFirestore: getFirestoreFirebase,
            doc: docFirebase,
            getDoc: getDocFirebase,
            addDoc: addDocFirebase,
            setDoc: setDocFirebase,
            updateDoc: updateDocFirebase,
            deleteDoc: deleteDocFirebase,
            onSnapshot: onSnapshotFirebase,
            collection: collectionFirebase,
            query: queryFirebase,
            where: whereFirebase,
            getDocs: getDocsFirebase,
            serverTimestamp: serverTimestampFirebase,
            // setLogLevel: setLogLevelFirebase // setLogLevel'i de ekleyelim
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background-color: #FFF7ED; /* Daha sÄ±cak bir arka plan */
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .scrollbar-thin::-webkit-scrollbar { width: 5px; height: 5px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #fdba74; border-radius: 10px; } /* orange-300 */
        .scrollbar-thumb-orange-300::-webkit-scrollbar-thumb { background: #fed7aa; }
        .scrollbar-track-orange-100::-webkit-scrollbar-track { background: #fff7ed; }
        .scrollbar-thumb-yellow-300::-webkit-scrollbar-thumb { background: #fde68a; }
        .scrollbar-track-yellow-100::-webkit-scrollbar-track { background: #fefce8; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fadeIn 0.7s ease-out forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
        .animation-delay-200 { animation-delay: 0.2s; }
        .animation-delay-400 { animation-delay: 0.4s; }

        .prose strong { font-weight: bold; }
        .prose em { font-style: italic; }
        .prose ul { list-style-type: disc; margin-left: 1.5rem; padding-left: 1rem;}
        .prose ol { list-style-type: decimal; margin-left: 1.5rem; padding-left: 1rem;}
        .prose a { color: #f97316; text-decoration: underline; }
        .prose a:hover { color: #ea580c; }
        .prose h1, .prose h2, .prose h3, .prose h4 { margin-bottom: 0.5em; margin-top: 1em;}
        .prose p { margin-bottom: 1em; }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { 
            initializeApp, 
            getAuth, 
            signInAnonymously, 
            signInWithCustomToken, 
            onAuthStateChanged,
            getFirestore,
            doc,
            getDoc,
            addDoc,
            setDoc,
            updateDoc,
            deleteDoc,
            onSnapshot,
            collection,
            query,
            where,
            getDocs,
            serverTimestamp,
            // setLogLevel // Bu global scope'ta olmayabilir, doÄŸrudan firebaseSDK.setLogLevel kullanÄ±lacak
        } = window.firebaseSDK || {}; 

        var __firebase_config = JSON.stringify({
            apiKey: "YOUR_API_KEY", // !! GERÃ‡EK API ANAHTARINIZI BURAYA GÄ°RÄ°N !!
            authDomain: "YOUR_AUTH_DOMAIN", 
            projectId: "YOUR_PROJECT_ID", 
            storageBucket: "YOUR_STORAGE_BUCKET", 
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID" // !! GERÃ‡EK APP ID'NÄ°ZÄ° BURAYA GÄ°RÄ°N !!
        });
        var __initial_auth_token = undefined; 
        var __app_id = 'ne-yesem-web'; 

        const { useState, useEffect, createContext, useContext, useRef } = React;

        const FirebaseContext = createContext(null);

        const FirebaseProvider = ({ children }) => {
          const [db, setDb] = useState(null);
          const [auth, setAuth] = useState(null);
          const [userId, setUserId] = useState(null);
          const [isAuthReady, setIsAuthReady] = useState(false); 

          useEffect(() => {
            if (!window.firebaseSDK || !window.firebaseSDK.initializeApp) {
                console.error("Firebase SDK yÃ¼klenemedi. LÃ¼tfen internet baÄŸlantÄ±nÄ±zÄ± ve script etiketlerini kontrol edin.");
                setIsAuthReady(true); 
                return;
            }
            // const { setLogLevel: setFirebaseLogLevel } = window.firebaseSDK; // setLogLevel'i SDK'dan al
            // if (setFirebaseLogLevel) {
            //    setFirebaseLogLevel('debug'); // Firebase debug loglarÄ±nÄ± etkinleÅŸtir
            // } else {
            //    console.warn("setLogLevel Firebase SDK'da bulunamadÄ±.");
            // }


            try {
              const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
              if (!firebaseConfig.apiKey || firebaseConfig.apiKey === "YOUR_API_KEY") {
                console.warn("Firebase API anahtarÄ± yapÄ±landÄ±rÄ±lmamÄ±ÅŸ. LÃ¼tfen __firebase_config iÃ§ine geÃ§erli bir anahtar girin. Firebase Ã¶zellikleri Ã§alÄ±ÅŸmayacaktÄ±r.");
                setIsAuthReady(true);
                return; 
              }
              const app = initializeApp(firebaseConfig);
              const firestore = getFirestore(app);
              const authentication = getAuth(app);

              setDb(firestore);
              setAuth(authentication);
              
              const unsubscribe = onAuthStateChanged(authentication, async (user) => {
                if (user) {
                  setUserId(user.uid);
                } else {
                  if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    try {
                      await signInWithCustomToken(authentication, __initial_auth_token);
                    } catch (error) {
                      console.error("Ã–zel token ile giriÅŸ yapÄ±lamadÄ±:", error);
                      try {
                        await signInAnonymously(authentication);
                      } catch (anonError) {
                        console.error("Anonim giriÅŸ yapÄ±lamadÄ±:", anonError);
                        setUserId(crypto.randomUUID()); 
                      }
                    }
                  } else {
                    try {
                      await signInAnonymously(authentication);
                    } catch (error) {
                      console.error("Anonim giriÅŸ yapÄ±lamadÄ±:", error);
                      setUserId(crypto.randomUUID());
                    }
                  }
                }
              
                if (!authentication.currentUser && !user) {
                    setUserId(prevUserId => prevUserId || crypto.randomUUID());
                } else if (authentication.currentUser) {
                    setUserId(authentication.currentUser.uid);
                }
                setIsAuthReady(true); 
              });

              return () => unsubscribe(); 
            } catch (error) {
              console.error("Firebase baÅŸlatÄ±lÄ±rken hata oluÅŸtu:", error);
              setIsAuthReady(true); 
            }
          }, []);

          return (
            <FirebaseContext.Provider value={{ db, auth, userId, isAuthReady }}>
              {children}
            </FirebaseContext.Provider>
          );
        };

        const PrivacyPolicyScreen = ({ onAccept, language }) => {
            const privacyTextTr = `UygulamamÄ±zÄ± kullanarak gizlilik politikamÄ±zÄ± kabul etmiÅŸ olursunuz. KiÅŸisel verilerinizi korumaya ve ÅŸeffaf olmaya kararlÄ±yÄ±z. Uygulama, kullanÄ±cÄ± deneyimini iyileÅŸtirmek ve kiÅŸiselleÅŸtirilmiÅŸ Ã¶neriler sunmak amacÄ±yla bazÄ± verileri anonim olarak toplayabilir. Bu veriler Ã¼Ã§Ã¼ncÃ¼ taraflarla paylaÅŸÄ±lmaz. Daha fazla bilgi iÃ§in lÃ¼tfen <a href="https://policies.google.com/privacy" target="_blank" rel="noopener noreferrer" class="text-orange-600 hover:text-orange-800 underline">Google Gizlilik PolitikasÄ±</a>'nÄ± okuyun.`;
            const privacyTextEn = `By using our application, you agree to our privacy policy. We are committed to protecting your personal data and being transparent. The application may collect some data anonymously to improve user experience and provide personalized recommendations. This data is not shared with third parties. For more information, please read the <a href="https://policies.google.com/privacy" target="_blank" rel="noopener noreferrer" class="text-orange-600 hover:text-orange-800 underline">Google Privacy Policy</a>.`;

            return (
                <div className="fixed inset-0 bg-gradient-to-br from-red-500 via-orange-400 to-yellow-300 flex items-center justify-center z-[100] p-4">
                    <div className="bg-white bg-opacity-95 rounded-2xl shadow-2xl p-6 sm:p-8 max-w-lg w-full text-center transform transition-all duration-500 animate-fade-in-up">
                        <h2 className="text-2xl sm:text-3xl font-bold text-orange-600 mb-4">
                            {language === 'tr' ? 'Gizlilik PolitikasÄ±' : 'Privacy Policy'}
                        </h2>
                        <p 
                            className="text-sm sm:text-base text-gray-700 mb-6 text-left leading-relaxed"
                            dangerouslySetInnerHTML={{ __html: language === 'tr' ? privacyTextTr : privacyTextEn }}
                        />
                        <button
                            onClick={onAccept}
                            className="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-3 rounded-full text-lg font-bold shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-105 hover:from-orange-600 hover:to-red-600"
                        >
                            {language === 'tr' ? 'Kabul Ediyorum ve Devam Et' : 'Accept and Continue'}
                        </button>
                    </div>
                </div>
            );
        };

        const Splash = ({ onStartApp, setLanguage, language, isLoading = false, loadingTextOverride = null }) => { 
          const canvasRef = useRef(null);
          const emojis = ['ğŸ•', 'ğŸ”', 'ğŸŸ', 'ğŸ£', 'ğŸœ', 'ğŸ©', 'ğŸ¦', 'ğŸ', 'ğŸ¥•', 'ğŸ', ' ', 'ğŸ¥—', 'ğŸ°']; 
          const [foodItems, setFoodItems] = useState([]);
          const [showAboutModal, setShowAboutModal] = useState(false); 

          useEffect(() => {
            const canvas = canvasRef.current;
            if (!canvas) return;
            const ctx = canvas.getContext('2d');

            const setCanvasDimensions = () => {
              canvas.width = window.innerWidth;
              canvas.height = window.innerHeight;
            };
            setCanvasDimensions();
            window.addEventListener('resize', setCanvasDimensions);

            const createFoodItem = () => ({
              x: Math.random() * canvas.width,
              y: -150 - Math.random() * 400, 
              emoji: emojis[Math.floor(Math.random() * emojis.length)],
              speed: 0.7 + Math.random() * 1.2, 
              opacity: 1,
              scale: 0.8 + Math.random() * 0.4, 
              rotation: Math.random() * Math.PI * 2, 
              rotationSpeed: (Math.random() - 0.5) * 0.015, 
              hit: false, 
              hitProgress: 0 
            });

            const initialFoodCount = Math.min(50, Math.floor(window.innerWidth / 28)); 
            const initialFoodItems = Array.from({ length: initialFoodCount }).map(createFoodItem);
            setFoodItems(initialFoodItems);

            let animationFrameId;

            const animate = () => {
              if (!canvasRef.current) return; 
              const currentCanvas = canvasRef.current;
              ctx.clearRect(0, 0, currentCanvas.width, currentCanvas.height); 

              setFoodItems(prevItems => {
                return prevItems.map(item => {
                  if (item.hit) {
                    item.hitProgress += 0.08; 
                    item.opacity -= 0.06; 
                    item.scale += 0.35; 
                    item.rotation += item.rotationSpeed * 6; 
                    if (item.opacity <= 0) {
                      return createFoodItem(); 
                    }
                  } else {
                    item.y += item.speed; 
                    item.rotation += item.rotationSpeed;
                    if (item.y > currentCanvas.height + 70) { 
                      return createFoodItem(); 
                    }
                  }

                  ctx.save();
                  ctx.globalAlpha = item.opacity;
                  ctx.font = `${50 * item.scale}px Arial`; 
                  ctx.textAlign = 'center';
                  ctx.textBaseline = 'middle';
                  ctx.translate(item.x, item.y);
                  ctx.rotate(item.rotation);
                  ctx.fillText(item.emoji, 0, 0);
                  ctx.restore();

                  return item;
                });
              });

              animationFrameId = requestAnimationFrame(animate);
            };

            animate();

            return () => {
              cancelAnimationFrame(animationFrameId);
              window.removeEventListener('resize', setCanvasDimensions);
            };
          }, []); 

          const handleBackgroundClick = (event) => {
            if (isLoading || showAboutModal) return;

            const contentBox = document.querySelector('.splash-content-box');
            const languageSelect = document.querySelector('.language-select');
            const aboutButton = document.querySelector('.about-button');
            
            if (
                (contentBox && contentBox.contains(event.target)) ||
                (languageSelect && languageSelect.contains(event.target)) ||
                (aboutButton && aboutButton.contains(event.target))
            ) {
              return;
            }

            const canvas = canvasRef.current;
            if (!canvas) return;
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            setFoodItems(prevItems => {
              let soundPlayed = false;
              return prevItems.map(item => {
                const emojiRenderedSize = 50 * item.scale; 
                const distance = Math.sqrt(Math.pow(x - item.x, 2) + Math.pow(y - item.y, 2));
                if (!item.hit && distance < emojiRenderedSize / 1.5) { 
                  if (!soundPlayed) { 
                    soundPlayed = true;
                  }
                  return { ...item, hit: true, opacity: 1, scale: item.scale * 1.2, hitProgress: 0 }; 
                }
                return item;
              });
            });
          };

          const aboutTextTr = "Bu uygulama, 'BugÃ¼n ne yesem?' diye dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼nÃ¼zde size yardÄ±mcÄ± olmak iÃ§in tasarlanmÄ±ÅŸtÄ±r. HÄ±zlÄ±ca yemek veya tatlÄ± Ã¶nerileri alabilir, AkÄ±llÄ± Asistan Ã¶zelliÄŸi ile elinizdeki malzemelerle tarifler oluÅŸturabilir, yemekler iÃ§in malzeme alternatifleri bulabilir veya belirli bir temaya gÃ¶re yemek fikirleri edinebilirsiniz.";
          const aboutTextEn = "This application is designed to help you when you're wondering 'What should I eat today?'. You can quickly get food or dessert suggestions, and with the Smart Assistant feature, you can generate recipes with the ingredients you have, find ingredient alternatives for dishes, or get meal ideas based on a specific theme.";


          const currentLoadingText = loadingTextOverride || (language === 'tr' ? 'YÃ¼kleniyor...' : 'Loading...');

          return (
            <div 
                className="relative flex items-center justify-center min-h-screen bg-gradient-to-br from-red-500 via-orange-400 to-yellow-300 p-4 animate-fade-in overflow-hidden" 
                onClick={handleBackgroundClick}
            >
              <canvas ref={canvasRef} className="absolute inset-0 z-0"></canvas> 
              
              {isLoading ? (
                <div className="relative z-10 text-white text-4xl font-bold animate-pulse drop-shadow-lg">
                  {currentLoadingText}
                </div>
              ) : (
                <>
                  <div className="absolute top-4 right-4 z-20 flex flex-col items-end space-y-3"> 
                    <select
                      value={language}
                      onChange={(e) => {
                        if (setLanguage) setLanguage(e.target.value);
                      }}
                      className="language-select bg-white/80 backdrop-blur-sm rounded-full px-5 py-2.5 text-gray-800 font-semibold shadow-lg hover:bg-white/90 focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all duration-200"
                    >
                      <option value="tr">TÃ¼rkÃ§e</option>
                      <option value="en">English</option>
                    </select>
                    <button
                        onClick={(e) => { e.stopPropagation(); setShowAboutModal(true);}}
                        className="about-button bg-white/80 backdrop-blur-sm text-orange-600 px-5 py-2.5 rounded-full font-semibold shadow-lg hover:bg-white/90 hover:text-orange-700 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500"
                    >
                        {language === 'tr' ? 'HakkÄ±nda' : 'About'}
                    </button>
                  </div>

                  {showAboutModal && (
                    <div 
                        className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-30 p-4 animate-fade-in" 
                        onClick={(e) => { e.stopPropagation(); setShowAboutModal(false);}} 
                    >
                      <div 
                        className="about-modal-content bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-md w-full text-left transform transition-all duration-300 animate-fade-in-up"
                        onClick={(e) => e.stopPropagation()} 
                      >
                        <h3 className="text-2xl font-bold text-orange-600 mb-4">
                          {language === 'tr' ? 'Uygulama HakkÄ±nda' : 'About The Application'}
                        </h3>
                        <p className="text-gray-700 mb-6 leading-relaxed">
                          {language === 'tr' ? aboutTextTr : aboutTextEn}
                        </p>
                        <button
                          onClick={() => setShowAboutModal(false)}
                          className="bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-2.5 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 font-semibold"
                        >
                          {language === 'tr' ? 'Kapat' : 'Close'}
                        </button>
                      </div>
                    </div>
                  )}

                  <div className="splash-content-box relative bg-white/80 backdrop-blur-md rounded-3xl shadow-2xl p-6 sm:p-10 text-center max-w-lg w-full transform transition-all duration-500 hover:scale-[1.03] z-10"> 
                    <h1 className="text-4xl sm:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-600 via-orange-500 to-yellow-400 mb-4 sm:mb-6 drop-shadow-sm">
                      {language === 'tr' ? 'Ne Yesem?' : 'What to Eat?'}
                    </h1>
                    <p className="text-6xl sm:text-8xl mb-4 sm:mb-6 animate-bounce-scale">
                      ğŸ•
                    </p>
                    <div className="text-lg sm:text-xl text-gray-800 font-semibold mb-6 sm:mb-10 leading-relaxed">
                      {language === 'tr' ? (
                        <>AÃ§ mÄ±sÄ±n? Ne yiyeceÄŸine karar veremiyor musun? <br/> En lezzetli kararlarÄ± birlikte verelim!</>
                      ) : (
                        <>Hungry? Can't decide what to eat? <br/> Let's make the most delicious decisions together!</>
                      )}
                    </div>
                    <button
                      onClick={(e) => { 
                        e.stopPropagation(); 
                        if(onStartApp) onStartApp(); 
                      }}
                      className="bg-gradient-to-r from-orange-500 to-red-600 text-white px-10 py-4 sm:px-12 sm:py-5 rounded-full text-xl sm:text-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95"
                    >
                      {language === 'tr' ? 'Lezzet YolculuÄŸuna BaÅŸla!' : 'Start the Flavor Journey!'}
                    </button>
                  </div>
                </>
              )}
            </div>
          );
        };

        // Ana uygulama bileÅŸeni
        function App() {
          const [currentPage, setCurrentPage] = useState('home'); 
          const [showSplash, setShowSplash] = useState(true); 
          const [language, setLanguage] = useState('tr'); 
          const { db, userId, isAuthReady } = useContext(FirebaseContext); 

          const [showPrivacyPolicyScreen, setShowPrivacyPolicyScreen] = useState(false);
          const [privacyPolicyChecked, setPrivacyPolicyChecked] = useState(false);
          const [isAppLoadingAfterSplash, setIsAppLoadingAfterSplash] = useState(false);
          const currentAppId = typeof __app_id !== 'undefined' ? __app_id : 'ne-yesem-web-default'; 

          // Gizlilik politikasÄ± kontrolÃ¼
          useEffect(() => {
            if (isAuthReady && userId && !privacyPolicyChecked && db) {
              const checkPrivacy = async () => {
                const privacyDocRef = doc(db, `artifacts/${currentAppId}/users/${userId}/appSettings/privacy`);
                try {
                  const docSnap = await getDoc(privacyDocRef);
                  if (!docSnap.exists() || !docSnap.data().accepted) {
                    setShowPrivacyPolicyScreen(true);
                  }
                } catch (error) {
                  console.error("Gizlilik politikasÄ± okunurken hata:", error);
                  setShowPrivacyPolicyScreen(true); 
                } finally {
                  setPrivacyPolicyChecked(true);
                }
              };
              checkPrivacy();
            }
          }, [isAuthReady, userId, privacyPolicyChecked, db, currentAppId]);

          const handleAcceptPrivacy = async () => {
            if (db && userId) {
              const privacyDocRef = doc(db, `artifacts/${currentAppId}/users/${userId}/appSettings/privacy`);
              try {
                await setDoc(privacyDocRef, { accepted: true, acceptedAt: serverTimestamp() }, { merge: true });
                setShowPrivacyPolicyScreen(false);
              } catch (error) {
                console.error("Gizlilik politikasÄ± kaydedilirken hata:", error);
              }
            } else {
                setShowPrivacyPolicyScreen(false);
                console.warn("DB veya UserID olmadan gizlilik kabul edildi (geÃ§ici).");
            }
          };

          const handleStartAppLoading = () => {
            setShowSplash(false); 
            setIsAppLoadingAfterSplash(true); 
            setTimeout(() => {
              setIsAppLoadingAfterSplash(false); 
            }, 1800); 
          };


          // YÃ¼kleme ekranÄ± (Firebase Auth ve Gizlilik KontrolÃ¼ iÃ§in)
          if (!isAuthReady || (userId && !privacyPolicyChecked)) {
            return <Splash isLoading={true} language={language} setLanguage={setLanguage} />;
          }

          // Gizlilik PolitikasÄ± EkranÄ±
          if (showPrivacyPolicyScreen) {
            return <PrivacyPolicyScreen onAccept={handleAcceptPrivacy} language={language} />;
          }

          // Ana AÃ§Ä±lÄ±ÅŸ EkranÄ± (KullanÄ±cÄ± etkileÅŸimli)
          if (showSplash) {
            return <Splash onStartApp={handleStartAppLoading} setLanguage={setLanguage} language={language} isLoading={false} />;
          }

          // "Lezzet YolculuÄŸuna BaÅŸla" sonrasÄ± YÃ¼kleme EkranÄ±
          if (isAppLoadingAfterSplash) {
            return <Splash isLoading={true} language={language} setLanguage={setLanguage} loadingTextOverride={language === 'tr' ? "Yemek piÅŸiriliyor..." : "Food is cooking..."} />;
          }


          // Ana Uygulama Ä°Ã§eriÄŸi
          return (
            <div className="min-h-screen bg-gradient-to-br from-red-500 via-orange-400 to-yellow-300 text-gray-800 font-inter flex flex-col items-center p-4">
              <header className="w-full max-w-4xl bg-white/90 backdrop-blur-md rounded-xl shadow-xl p-4 sm:p-6 mb-6 sm:mb-8 flex flex-col items-center animate-fade-in-up">
                <h1 className="text-3xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-600 via-orange-500 to-amber-400 mb-3 sm:mb-4 drop-shadow-sm">
                  {language === 'tr' ? 'Ne Yesem?' : 'What to Eat?'}
                </h1>
                <p className="text-md sm:text-lg text-gray-700 text-center mb-4 sm:mb-6">
                  {language === 'tr' ?
                    'BugÃ¼n ne yiyeceÄŸine karar veremiyor musun? Sana yardÄ±m edelim!' :
                    "Can't decide what to eat today? Let us help you!"
                  }
                </p>
                <div className="flex flex-wrap justify-center gap-2 sm:gap-4 w-full">
                  <button
                    onClick={() => setCurrentPage('home')}
                    className={`px-4 py-2 sm:px-6 sm:py-3 rounded-full font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 text-sm sm:text-base shadow-md hover:shadow-lg
                      ${currentPage === 'home' ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-orange-100 hover:text-orange-700'}`}
                  >
                    {language === 'tr' ? 'Ana Sayfa' : 'Home'}
                  </button>
                  <button
                    onClick={() => setCurrentPage('smartAssistant')}
                    className={`px-4 py-2 sm:px-6 sm:py-3 rounded-full font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 text-sm sm:text-base shadow-md hover:shadow-lg
                      ${currentPage === 'smartAssistant' ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-orange-100 hover:text-orange-700'}`}
                  >
                    {language === 'tr' ? 'AkÄ±llÄ± Asistan âœ¨' : 'Smart Assistant âœ¨'}
                  </button>
                  {!showSplash && ( 
                    <button
                      onClick={() => {
                          setShowSplash(true); 
                      }}
                      className="px-4 py-2 sm:px-6 sm:py-3 rounded-full font-semibold transition-all duration-300 ease-in-out transform hover:scale-105 bg-red-500 text-white shadow-md hover:shadow-lg hover:bg-red-600"
                    >
                      {language === 'tr' ? 'Geri DÃ¶n' : 'Go Back'}
                    </button>
                  )}
                </div>
              </header>

              <main className="w-full max-w-4xl bg-white/90 backdrop-blur-md rounded-xl shadow-xl p-4 sm:p-8 animate-fade-in-up animation-delay-200">
                {currentPage === 'home' && <HomePage language={language} />}
                {currentPage === 'smartAssistant' && <SmartAssistantPage language={language} />}
              </main>

              <footer className="w-full max-w-4xl mt-6 sm:mt-8 p-3 sm:p-4 bg-white/80 backdrop-blur-sm rounded-xl shadow-lg text-center animate-fade-in-up animation-delay-400">
                {userId && (
                  <p className="text-xs sm:text-sm text-gray-600">
                    {language === 'tr' ? 'KullanÄ±cÄ± ID:' : 'User ID:'} <span className="font-mono text-xs break-all">{userId}</span>
                  </p>
                )}
              </footer>
            </div>
          );
        }

        // HomePage BileÅŸeni
        const HomePage = ({ language }) => {
          const [budget, setBudget] = useState('');
          const [time, setTime] = useState('');
          const [suggestions, setSuggestions] = useState([]); 
          const [activeSuggestionType, setActiveSuggestionType] = useState(null); 
          const [showModal, setShowModal] = useState(false);
          const [modalContent, setModalContent] = useState('');

          const [selectedFoodForRecipe, setSelectedFoodForRecipe] = useState(null);
          const [generatedRecipe, setGeneratedRecipe] = useState('');
          const [isGeneratingRecipeView, setIsGeneratingRecipeView] = useState(false); 
          const [showRecipeModal, setShowRecipeModal] = useState(false);

          const getSuggestionsData = (lang) => ({
            allSuggestions: [
                { name: lang === 'tr' ? "Menemen" : "Menemen (Turkish Scrambled Eggs)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "HÄ±zlÄ± ve lezzetli bir kahvaltÄ± veya hafif akÅŸam yemeÄŸi." : "A quick and delicious breakfast or light dinner." },
                { name: lang === 'tr' ? "Makarna (SalÃ§alÄ±/Peynirli)" : "Pasta (with Tomato Sauce/Cheese)", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "Ã‡eÅŸitli soslarla kolayca hazÄ±rlanabilir, doyurucu bir Ã¶ÄŸÃ¼n." : "Can be easily prepared with various sauces, a filling meal." },
                { name: lang === 'tr' ? "Mercimek Ã‡orbasÄ±" : "Lentil Soup", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "Besleyici ve doyurucu bir baÅŸlangÄ±Ã§ veya hafif ana yemek." : "A nutritious and filling starter or light main course." },
                { name: lang === 'tr' ? "Tavuk Sote (Sebzeli)" : "Chicken Stir-fry (with Vegetables)", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "YanÄ±nda pilav veya salata ile harika gider, pratik ve lezzetli." : "Goes great with rice or salad, practical and delicious." },
                { name: lang === 'tr' ? "FÄ±rÄ±nda Sebzeli Tavuk Baget" : "Oven-baked Chicken Drumsticks with Vegetables", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "SaÄŸlÄ±klÄ± ve pratik bir ana yemek, fÄ±rÄ±nda kolayca piÅŸer." : "A healthy and practical main course, easily baked in the oven." },
                { name: lang === 'tr' ? "Omlet (Peynirli/Sebzeli)" : "Omelette (with Cheese/Vegetables)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "HÄ±zlÄ±ca hazÄ±rlanabilen protein deposu, kahvaltÄ± veya hafif Ã¶ÄŸÃ¼n iÃ§in ideal." : "A quick protein source, ideal for breakfast or a light meal." },
                { name: lang === 'tr' ? "Tost (KaÅŸarlÄ±/KarÄ±ÅŸÄ±k)" : "Grilled Cheese Sandwich (Turkish Style/Mixed)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Pratik ve hÄ±zlÄ± bir atÄ±ÅŸtÄ±rmalÄ±k veya kahvaltÄ±." : "A practical and quick snack or breakfast." },
                { name: lang === 'tr' ? "Nohut YemeÄŸi" : "Chickpea Stew", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "Geleneksel ve besleyici bir ev yemeÄŸi, yanÄ±nda pilavla iyi gider." : "A traditional and nutritious home-cooked meal, goes well with rice." },
                { name: lang === 'tr' ? "Pancake (Meyveli/Ã‡ikolatalÄ±)" : "Pancakes (with Fruit/Chocolate)", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "TatlÄ± veya tuzlu olarak tÃ¼ketilebilir, kahvaltÄ± veya atÄ±ÅŸtÄ±rmalÄ±k." : "Can be consumed sweet or savory, for breakfast or snack." },
                { name: lang === 'tr' ? "Krep (Peynirli/NutellalÄ±)" : "Crepes (with Cheese/Nutella)", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "Ã‡eÅŸitli iÃ§ harÃ§larla hazÄ±rlanabilir, pratik ve lezzetli." : "Can be prepared with various fillings, practical and delicious." },
                { name: lang === 'tr' ? "Ton BalÄ±klÄ± Salata" : "Tuna Salad", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Hafif ve pratik bir Ã¶ÄŸÃ¼n, yaz aylarÄ± iÃ§in ideal." : "A light and practical meal, ideal for summer months." },
                { name: lang === 'tr' ? "Ev YapÄ±mÄ± Pizza (Pratik)" : "Homemade Pizza (Quick)", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "Kendi pizzanÄ± kendin yap! HazÄ±r tabanla daha hÄ±zlÄ±." : "Make your own pizza! Faster with a ready-made base." },
                { name: lang === 'tr' ? "KarnÄ±yarÄ±k" : "Karniyarik (Stuffed Eggplant)", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "TÃ¼rk mutfaÄŸÄ±nÄ±n sevilen lezzetlerinden, doyurucu bir ana yemek." : "One of the beloved dishes of Turkish cuisine, a filling main course." },
                { name: lang === 'tr' ? "KÃ¶fte Patates KÄ±zartmasÄ±" : "Meatballs and French Fries", location: "home", budget: "150-300 TL", time: "15-30 dk", description: lang === 'tr' ? "Klasik ve doyurucu bir ikili, Ã§ocuklarÄ±n da favorisi." : "A classic and satisfying duo, also a favorite of children." },
                { name: lang === 'tr' ? "Meyve TabaÄŸÄ±" : "Fruit Platter", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "SaÄŸlÄ±klÄ± ve ferahlatÄ±cÄ± bir seÃ§enek, ara Ã¶ÄŸÃ¼n iÃ§in ideal." : "A healthy and refreshing option, ideal for a snack." },
                { name: lang === 'tr' ? "HazÄ±r Ã‡orba (Eklemelerle)" : "Instant Soup (with Additions)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Ã‡ok hÄ±zlÄ± hazÄ±rlanabilen sÄ±cak bir baÅŸlangÄ±Ã§, kruton veya baharatla zenginleÅŸtirilebilir." : "A hot starter that can be prepared very quickly, can be enriched with croutons or spices." },
                { name: lang === 'tr' ? "Patates Oturtma" : "Layered Potato Bake with Minced Meat", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "KÄ±ymalÄ± veya sebzeli, fÄ±rÄ±nda piÅŸen lezzetli bir ana yemek." : "A delicious main course with minced meat or vegetables, baked in the oven." },
                { name: lang === 'tr' ? "Tavuklu Pilav" : "Chicken and Rice Pilaf", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "Doyurucu ve pratik, tek tencerede hazÄ±rlanabilir." : "Filling and practical, can be prepared in one pot." },
                { name: lang === 'tr' ? "YumurtalÄ± Ekmek (French Toast)" : "Eggy Bread (Turkish French Toast)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "KahvaltÄ± veya hafif bir Ã¶ÄŸÃ¼n iÃ§in ideal, tatlÄ± veya tuzlu." : "Ideal for breakfast or a light meal, sweet or savory." },
                { name: lang === 'tr' ? "Peynirli Makarna FÄ±rÄ±n" : "Baked Macaroni and Cheese", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "KremalÄ± ve bol peynirli, fÄ±rÄ±nda kÄ±zarmÄ±ÅŸ lezzet." : "Creamy and cheesy, baked to golden perfection." },
                { name: lang === 'tr' ? "Sebzeli Omlet Wrap" : "Vegetable Omelette Wrap", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "HÄ±zlÄ±, saÄŸlÄ±klÄ± ve doyurucu bir dÃ¼rÃ¼m alternatifi." : "A quick, healthy, and filling wrap alternative." },
                { name: lang === 'tr' ? "Patates SalatasÄ±" : "Potato Salad", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "Yan lezzet olarak veya hafif bir Ã¶ÄŸÃ¼n olarak tÃ¼ketilebilir." : "Can be consumed as a side dish or a light meal." },
                { name: lang === 'tr' ? "YoÄŸurtlu Semizotu SalatasÄ±" : "Purslane Salad with Yogurt", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "FerahlatÄ±cÄ± ve saÄŸlÄ±klÄ± bir yaz salatasÄ±." : "A refreshing and healthy summer salad." },
                { name: lang === 'tr' ? "Kuru Fasulye" : "Kuru Fasulye (Turkish White Bean Stew)", location: "home", budget: "150-300 TL", time: "30+ dk", description: lang === 'tr' ? "TÃ¼rk mutfaÄŸÄ±nÄ±n klasiÄŸi, pilavla mÃ¼kemmel uyum." : "A classic of Turkish cuisine, perfect with rice." },
                { name: lang === 'tr' ? "Peynir TabaÄŸÄ± ve Kraker" : "Cheese Platter and Crackers", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "HÄ±zlÄ± ve ÅŸÄ±k bir atÄ±ÅŸtÄ±rmalÄ±k veya baÅŸlangÄ±Ã§." : "A quick and elegant snack or starter." },
                { name: lang === 'tr' ? "Sosisli SandviÃ§ (Ev YapÄ±mÄ±)" : "Homemade Hot Dog Sandwich", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Pratik ve lezzetli, hÄ±zlÄ±ca hazÄ±rlanÄ±r." : "Practical and delicious, prepared quickly." },
                { name: lang === 'tr' ? "Sucuklu Yumurta" : "Eggs with Sucuk (Turkish Sausage)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "TÃ¼rk kahvaltÄ±sÄ±nÄ±n vazgeÃ§ilmezi." : "A staple of Turkish breakfast." },
                { name: lang === 'tr' ? "MÃ¼cver" : "Mucver (Zucchini Fritters)", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "Sebzeli ve hafif, yoÄŸurtla servis edilebilir." : "Vegetable and light, can be served with yogurt." },
                { name: lang === 'tr' ? "FÄ±rÄ±nda Patates Dilimleri" : "Oven-baked Potato Wedges", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "BaharatlÄ± ve lezzetli, ana yemeÄŸin yanÄ±nda veya atÄ±ÅŸtÄ±rmalÄ±k." : "Spicy and delicious, as a side dish or snack." },
                { name: lang === 'tr' ? "YoÄŸurtlu HavuÃ§ SalatasÄ±" : "Carrot Salad with Yogurt", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Hafif ve ferahlatÄ±cÄ± bir meze." : "A light and refreshing appetizer." },
                { name: lang === 'tr' ? "KÃ¶zlenmiÅŸ Biber SalatasÄ±" : "Roasted Pepper Salad", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "Lezzetli ve pratik bir salata." : "A delicious and practical salad." },
                { name: lang === 'tr' ? "Peynirli GÃ¶zleme (HazÄ±r Yufka)" : "Gozleme with Cheese (Ready Dough)", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "HÄ±zlÄ±ca hazÄ±rlanabilen geleneksel lezzet." : "Traditional flavor that can be prepared quickly." },
                { name: lang === 'tr' ? "SÃ¼tlaÃ§" : "Sutlac (Turkish Rice Pudding)", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "Klasik TÃ¼rk tatlÄ±sÄ±." : "Classic Turkish dessert." },
                { name: lang === 'tr' ? "Kabak YemeÄŸi (ZeytinyaÄŸlÄ±)" : "Zucchini Dish (with Olive Oil)", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "Hafif ve saÄŸlÄ±klÄ± bir sebze yemeÄŸi." : "A light and healthy vegetable dish." },
                { name: lang === 'tr' ? "Kuskus SalatasÄ±" : "Couscous Salad", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "FerahlatÄ±cÄ± ve doyurucu bir salata." : "A refreshing and filling salad." },
                { name: lang === 'tr' ? "Tavuklu SandviÃ§" : "Chicken Sandwich", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "HÄ±zlÄ± ve pratik bir Ã¶ÄŸle yemeÄŸi alternatifi." : "A quick and practical lunch alternative." },
                { name: lang === 'tr' ? "Ezogelin Ã‡orbasÄ±" : "Ezogelin Soup", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "AcÄ±lÄ± ve doyurucu TÃ¼rk Ã§orbasÄ±." : "Spicy and filling Turkish soup." },
                { name: lang === 'tr' ? "Peynirli PoÄŸaÃ§a (HazÄ±r Hamur)" : "Pogaca with Cheese (Ready Dough)", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "Ã‡ay saatleri iÃ§in pratik atÄ±ÅŸtÄ±rmalÄ±k." : "Practical snack for tea time." },
                { name: lang === 'tr' ? "Patatesli Yumurta" : "Eggs with Potatoes", location: "home", budget: "0-150 TL", time: "15-30 dk", description: lang === 'tr' ? "Doyurucu ve lezzetli bir kahvaltÄ±." : "A filling and delicious breakfast." },
                { name: lang === 'tr' ? "SÄ±cak SandviÃ§ (Sucuklu/SalamlÄ±)" : "Hot Sandwich (with Sucuk/Salami)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "HÄ±zlÄ± ve lezzetli bir atÄ±ÅŸtÄ±rmalÄ±k." : "A quick and delicious snack." },
            ],
            allDessertSuggestions: [
                { name: lang === 'tr' ? "Sufle (Ev YapÄ±mÄ±)" : "SoufflÃ© (Homemade)", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "AkÄ±ÅŸkan Ã§ikolatalÄ±, pratik ve lezzetli." : "Molten chocolate, practical and delicious." },
                { name: lang === 'tr' ? "Brownie (HazÄ±r KarÄ±ÅŸÄ±m)" : "Brownies (from Mix)", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "HÄ±zlÄ±ca hazÄ±rlanabilen, Ã§ikolata sevenler iÃ§in." : "Quick to prepare, for chocolate lovers." },
                { name: lang === 'tr' ? "Muzlu SÃ¼tlaÃ§" : "Banana Rice Pudding", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "Klasik sÃ¼tlaca farklÄ± bir dokunuÅŸ." : "A twist on classic rice pudding." },
                { name: lang === 'tr' ? "Meyveli YoÄŸurt" : "Fruity Yogurt", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Hafif ve saÄŸlÄ±klÄ± bir tatlÄ± alternatifi." : "A light and healthy dessert alternative." },
                { name: lang === 'tr' ? "Puding (HazÄ±r)" : "Pudding (Instant)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Ã‡ok hÄ±zlÄ± hazÄ±rlanabilen klasik bir tatlÄ±." : "A classic dessert that can be prepared very quickly." },
                { name: lang === 'tr' ? "ElmalÄ± Kurabiye" : "Apple Cookies", location: "home", budget: "0-150 TL", time: "30+ dk", description: lang === 'tr' ? "Ã‡ay saatleri iÃ§in vazgeÃ§ilmez lezzet." : "An indispensable treat for tea time." },
                { name: lang === 'tr' ? "Dondurma (HazÄ±r)" : "Ice Cream (Store-bought)", location: "home", budget: "0-150 TL", time: "5-15 dk", description: lang === 'tr' ? "Serinletici ve pratik bir tatlÄ±." : "A refreshing and practical dessert." },
            ]
          });
          
          // Dil deÄŸiÅŸtikÃ§e Ã¶neri listelerini gÃ¼ncellemek iÃ§in useEffect
          useEffect(() => {
            if (activeSuggestionType === 'food' && suggestions.length > 0) {
                handleGetSuggestions();
            } else if (activeSuggestionType === 'dessert' && suggestions.length > 0) {
                handleGetDessertSuggestions();
            }
            // eslint-disable-next-line react-hooks/exhaustive-deps
          }, [language]); 

          // Component ilk yÃ¼klendiÄŸinde varsayÄ±lan Ã¶nerileri gÃ¶ster
          useEffect(() => {
            const initialSuggestionsData = getSuggestionsData(language).allSuggestions;
            const shuffled = [...initialSuggestionsData].sort(() => 0.5 - Math.random());
            const initialToShow = shuffled.slice(0, 3); 
            setSuggestions(initialToShow);
            setActiveSuggestionType('food');
            // eslint-disable-next-line react-hooks/exhaustive-deps
          }, []); 


          const handleGetSuggestions = () => {
            let currentAllSuggestions = getSuggestionsData(language).allSuggestions;
            let filtered = currentAllSuggestions.filter(sug => {
              if (budget && sug.budget !== budget) {
                return false;
              }
              if (time && sug.time !== time) {
                return false;
              }
              return true;
            });

            if (filtered.length === 0) {
              const shuffled = [...currentAllSuggestions].sort(() => 0.5 - Math.random());
              filtered = shuffled.slice(0, 5);
              setModalContent(language === 'tr' ? "BelirttiÄŸiniz kriterlere uygun Ã¶zel bir Ã¶neri bulunamadÄ±. Ä°ÅŸte sizin iÃ§in birkaÃ§ popÃ¼ler seÃ§enek!" : "No specific suggestions found for your criteria. Here are some popular options for you!");
              setShowModal(true);
            } else {
              const shuffledFiltered = [...filtered].sort(() => 0.5 - Math.random());
              filtered = shuffledFiltered.slice(0, Math.min(5, shuffledFiltered.length));
            }

            setSuggestions(filtered);
            setActiveSuggestionType('food');
            setGeneratedRecipe(''); 
            setShowRecipeModal(false);
          };

          const handleGetDessertSuggestions = () => {
            let currentAllDessertSuggestions = getSuggestionsData(language).allDessertSuggestions;
            let filtered = currentAllDessertSuggestions.filter(sug => {
              if (budget && sug.budget !== budget) {
                return false;
              }
              if (time && sug.time !== time) {
                return false;
              }
              return true;
            });

            if (filtered.length === 0) {
              const shuffled = [...currentAllDessertSuggestions].sort(() => 0.5 - Math.random());
              filtered = shuffled.slice(0, 5);
              setModalContent(language === 'tr' ? "BelirttiÄŸiniz kriterlere uygun Ã¶zel bir tatlÄ± Ã¶nerisi bulunamadÄ±. Ä°ÅŸte sizin iÃ§in birkaÃ§ popÃ¼ler seÃ§enek!" : "No specific dessert suggestions found for your criteria. Here are some popular options for you!");
              setShowModal(true);
            } else {
                const shuffledFiltered = [...filtered].sort(() => 0.5 - Math.random());
                filtered = shuffledFiltered.slice(0, Math.min(5, shuffledFiltered.length));
            }

            setSuggestions(filtered);
            setActiveSuggestionType('dessert');
            setGeneratedRecipe(''); 
            setShowRecipeModal(false);
          };

          const handleViewRecipe = async (foodName) => {
            if (!foodName) return;
            setSelectedFoodForRecipe(foodName);
            setIsGeneratingRecipeView(true);
            setGeneratedRecipe(''); 
            setShowRecipeModal(true); 

            const prompt = language === 'tr' ?
              `Bana "${foodName}" yemeÄŸinin evde yapÄ±labilecek basit bir tarifini ver. Tarifin adÄ±, malzemeler listesi (miktarlarÄ±yla birlikte) ve adÄ±m adÄ±m yapÄ±lÄ±ÅŸÄ± ÅŸeklinde olsun. BaÅŸlÄ±klarÄ± Markdown formatÄ±nda kullan (Ã¶rn: **Yemek AdÄ±**, **Malzemeler**, **YapÄ±lÄ±ÅŸÄ±**).` :
              `Give me a simple home-cook recipe for "${foodName}". The response should include the name of the dish, a list of ingredients (with quantities), and step-by-step instructions. Use Markdown for headings (e.g., **Dish Name**, **Ingredients**, **Instructions**).`;

            try {
              let chatHistory = [];
              chatHistory.push({ role: "user", parts: [{ text: prompt }] });
              const payload = { contents: chatHistory };
              const apiKey = ""; 
              const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

              const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });

              if (!response.ok) {
                const errorResult = await response.json();
                console.error("API Error for recipe:", errorResult);
                throw new Error(language === 'tr' ? `API HatasÄ±: ${response.status}` : `API Error: ${response.status}`);
              }

              const result = await response.json();
              if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                setGeneratedRecipe(text);
              } else {
                setGeneratedRecipe(language === 'tr' ? "Tarif alÄ±nÄ±rken bir sorun oluÅŸtu. LÃ¼tfen tekrar deneyin." : "There was a problem getting the recipe. Please try again.");
              }
            } catch (error) {
              console.error("Tarif alma hatasÄ±:", error);
              setGeneratedRecipe(language === 'tr' ? `Tarif alÄ±nÄ±rken bir hata oluÅŸtu: ${error.message}` : `An error occurred while getting the recipe: ${error.message}`);
            } finally {
              setIsGeneratingRecipeView(false);
            }
          };


          return (
            <div className="flex flex-col items-center p-4 sm:p-6 bg-white/80 backdrop-blur-sm rounded-xl shadow-xl animate-fade-in-up">
              <h2 className="text-2xl sm:text-3xl font-bold text-orange-600 mb-2">{language === 'tr' ? 'HÄ±zlÄ± SeÃ§im (Evde)' : 'Quick Selection (At Home)'}</h2>
              <p className="text-gray-700 mb-6 text-center text-sm sm:text-base">
                {language === 'tr' ? 'AÅŸaÄŸÄ±daki filtreleri kullanarak veya doÄŸrudan butonlara tÄ±klayarak Ã¶neri alabilirsiniz.' : 'You can get suggestions using the filters below or by clicking the buttons directly.'}
              </p>

              {/* BÃ¼tÃ§e */}
              <div className="mb-6 w-full max-w-md">
                <label className="block text-gray-700 text-lg font-semibold mb-3">{language === 'tr' ? 'BÃ¼tÃ§en ne kadar?' : 'What is your budget?'}</label>
                <div className="flex flex-wrap justify-center gap-3">
                  {['0-150 TL', '150-300 TL', '300+ TL'].map(b => ( 
                    <button
                      key={b}
                      onClick={() => setBudget(b)}
                      className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-105 shadow-sm hover:shadow-md
                        ${budget === b ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-green-100 hover:text-green-700'}`}
                    >
                      {b}
                    </button>
                  ))}
                </div>
              </div>

              {/* SÃ¼re */}
              <div className="mb-8 w-full max-w-md">
                <label className="block text-gray-700 text-lg font-semibold mb-3">{language === 'tr' ? 'Ne kadar sÃ¼ren var?' : 'How much time do you have?'}</label>
                <div className="flex flex-wrap justify-center gap-3">
                  {['5-15 dk', '15-30 dk', '30+ dk'].map(t => (
                    <button
                      key={t}
                      onClick={() => setTime(t)}
                      className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-105 shadow-sm hover:shadow-md
                        ${time === t ? 'bg-red-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-red-100 hover:text-red-700'}`}
                    >
                      {t}
                    </button>
                  ))}
                </div>
              </div>

              <div className="flex flex-col items-center gap-4 mb-8 w-full max-w-md">
                <button
                  onClick={handleGetSuggestions}
                  className="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-4 rounded-full text-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95"
                >
                  {language === 'tr' ? 'Yemek Ã–nerisi Al!' : 'Get Food Suggestions!'}
                </button>

                <button
                  onClick={handleGetDessertSuggestions}
                  className="w-full bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-8 py-4 rounded-full text-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95"
                >
                  {language === 'tr' ? 'TatlÄ± Ã–nerileri Al!' : 'Get Dessert Suggestions!'}
                </button>
              </div>

              {activeSuggestionType === 'food' && suggestions.length > 0 && (
                <div className="mt-8 w-full max-w-md md:max-w-2xl lg:max-w-3xl bg-orange-50 p-4 sm:p-6 rounded-lg shadow-inner border border-orange-200 animate-fade-in-up">
                  <h3 className="text-xl sm:text-2xl font-bold text-orange-700 mb-4 text-center">{language === 'tr' ? 'Yemek Ã–nerileri' : 'Food Suggestions'}</h3>
                  <div className="flex overflow-x-auto snap-x snap-mandatory space-x-4 pb-4 scrollbar-thin scrollbar-thumb-orange-300 scrollbar-track-orange-100">
                    {suggestions.map((sug, index) => (
                      <div key={index} className="flex-shrink-0 w-72 sm:w-80 md:w-96 snap-center bg-white p-4 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col items-start gap-2">
                        <span className="text-lg sm:text-xl font-bold text-gray-800">{sug.name}</span>
                        <p className="text-xs sm:text-sm text-gray-600">({sug.time}, {sug.budget})</p>
                        <p className="text-sm sm:text-base text-gray-700 mb-2">{sug.description}</p>
                        <button
                          onClick={() => handleViewRecipe(sug.name)}
                          className="mt-auto bg-orange-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-orange-600 transition-colors self-start"
                          disabled={isGeneratingRecipeView && selectedFoodForRecipe === sug.name}
                        >
                          {isGeneratingRecipeView && selectedFoodForRecipe === sug.name ? (language === 'tr' ? 'YÃ¼kleniyor...' : 'Loading...') : (language === 'tr' ? 'Tarife Bak' : 'View Recipe')}
                        </button>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {activeSuggestionType === 'dessert' && suggestions.length > 0 && (
                <div className="mt-8 w-full max-w-md md:max-w-2xl lg:max-w-3xl bg-yellow-50 p-4 sm:p-6 rounded-lg shadow-inner border border-yellow-200 animate-fade-in-up">
                  <h3 className="text-xl sm:text-2xl font-bold text-yellow-700 mb-4 text-center">
                    {language === 'tr' ? 'TatlÄ± Ã–nerileri ğŸ°' : 'Dessert Suggestions ğŸ°'}
                  </h3>
                  <div className="flex overflow-x-auto snap-x snap-mandatory space-x-4 pb-4 scrollbar-thin scrollbar-thumb-yellow-300 scrollbar-track-yellow-100">
                    {suggestions.map((sug, index) => (
                      <div key={index} className="flex-shrink-0 w-72 sm:w-80 md:w-96 snap-center bg-white p-4 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 flex flex-col items-start gap-2">
                        <span className="text-lg sm:text-xl font-bold text-gray-800">{sug.name}</span>
                        <p className="text-xs sm:text-sm text-gray-600">({sug.time}, {sug.budget})</p>
                        <p className="text-sm sm:text-base text-gray-700 mb-2">{sug.description}</p>
                         <button
                          onClick={() => handleViewRecipe(sug.name)}
                          className="mt-auto bg-yellow-500 text-white px-4 py-2 rounded-md text-sm font-semibold hover:bg-yellow-600 transition-colors self-start"
                          disabled={isGeneratingRecipeView && selectedFoodForRecipe === sug.name}
                        >
                          {isGeneratingRecipeView && selectedFoodForRecipe === sug.name ? (language === 'tr' ? 'YÃ¼kleniyor...' : 'Loading...') : (language === 'tr' ? 'Tarife Bak' : 'View Recipe')}
                        </button>
                      </div>
                    ))}
                  </div>
                </div>
              )}
              
              {activeSuggestionType && suggestions.length === 0 && !showModal && (
                 <div className="mt-8 w-full max-w-md text-center p-4 bg-gray-100 rounded-lg animate-fade-in">
                    <p className="text-gray-600">
                        {language === 'tr' ? 'Bu kriterlere uygun Ã¶neri bulunamadÄ±.' : 'No suggestions found for these criteria.'}
                    </p>
                 </div>
              )}

              {/* Genel Mesaj ModalÄ± */}
              {showModal && (
                <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in">
                  <div className="bg-white rounded-lg shadow-xl p-6 max-w-sm w-full text-center animate-fade-in-up">
                    <p className="text-lg font-semibold text-gray-800 mb-4">{modalContent}</p>
                    <button
                      onClick={() => setShowModal(false)}
                      className="bg-orange-500 text-white px-5 py-2 rounded-md hover:bg-orange-600 transition-colors"
                    >
                      {language === 'tr' ? 'Tamam' : 'OK'}
                    </button>
                  </div>
                </div>
              )}

              {/* Tarif GÃ¶rÃ¼ntÃ¼leme ModalÄ± */}
              {showRecipeModal && (
                <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fade-in">
                  <div className="bg-white rounded-lg shadow-xl p-6 max-w-lg w-full text-left max-h-[80vh] overflow-y-auto animate-fade-in-up">
                    <h3 className="text-2xl font-bold text-orange-600 mb-4">
                        {selectedFoodForRecipe} {language === 'tr' ? ' Tarifi' : ' Recipe'}
                    </h3>
                    {isGeneratingRecipeView ? (
                        <div className="flex justify-center items-center h-40">
                            <svg className="animate-spin h-8 w-8 text-orange-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p className="ml-3 text-gray-600">{language === 'tr' ? 'Tarif yÃ¼kleniyor...' : 'Loading recipe...'}</p>
                        </div>
                    ) : (
                        <div className="prose prose-sm sm:prose-base max-w-none text-gray-700" dangerouslySetInnerHTML={{ __html: generatedRecipe.replace(/\n/g, '<br/>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>') }} />
                    )}
                    <button
                      onClick={() => {
                        setShowRecipeModal(false);
                        setGeneratedRecipe(''); 
                        setSelectedFoodForRecipe(null);
                      }}
                      className="mt-6 bg-orange-500 text-white px-5 py-2 rounded-md hover:bg-orange-600 transition-colors"
                    >
                      {language === 'tr' ? 'Kapat' : 'Close'}
                    </button>
                  </div>
                </div>
              )}
            </div>
          );
        };

        // SmartAssistantPage BileÅŸeni
        const SmartAssistantPage = ({ language }) => {
          const [ingredients, setIngredients] = useState('');
          const [generatedRecipe, setGeneratedRecipe] = useState('');
          const [isGeneratingRecipe, setIsGeneratingRecipe] = useState(false);

          const [foodNameForSubstitution, setFoodNameForSubstitution] = useState('');
          const [oldIngredient, setOldIngredient] = useState('');
          const [suggestedSubstitutions, setSuggestedSubstitutions] = useState('');
          const [isSuggestingSubstitution, setIsSuggestingSubstitution] = useState(false);

          const [theme, setTheme] = useState('');
          const [mealIdeasByTheme, setMealIdeasByTheme] = useState('');
          const [isGeneratingMealIdeas, setIsGeneratingMealIdeas] = useState(false);

          const [showModal, setShowModal] = useState(false);
          const [modalContent, setModalContent] = useState('');

          // Malzemelerle tarif oluÅŸturma fonksiyonu
          const generateRecipeFromIngredients = async () => {
            if (!ingredients.trim()) {
              setModalContent(language === 'tr' ? "LÃ¼tfen tarif oluÅŸturmak iÃ§in malzemeleri girin." : "Please enter ingredients to generate a recipe.");
              setShowModal(true);
              return;
            }

            setIsGeneratingRecipe(true);
            setGeneratedRecipe('');

            const prompt = language === 'tr' ?
                `Åu malzemelerle hazÄ±rlanabilecek bir yemek tarifi Ã¶ner: ${ingredients}. Tarifin adÄ±, malzemeler listesi (miktarlarÄ±yla) ve adÄ±m adÄ±m yapÄ±lÄ±ÅŸÄ± ÅŸeklinde olsun. BaÅŸlÄ±klarÄ± Markdown formatÄ±nda kullan (Ã¶rn: **Yemek AdÄ±**, **Malzemeler**, **YapÄ±lÄ±ÅŸÄ±**).` :
                `Suggest a recipe that can be prepared with the following ingredients: ${ingredients}. The response should include the name of the dish, a list of ingredients (with quantities), and step-by-step instructions. Use Markdown for headings (e.g., **Dish Name**, **Ingredients**, **Instructions**).`;


            try {
              let chatHistory = [];
              chatHistory.push({ role: "user", parts: [{ text: prompt }] });
              const payload = { contents: chatHistory };
              const apiKey = ""; 
              const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

              const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });

              if (!response.ok) {
                const errorResult = await response.json();
                console.error("API Error:", errorResult);
                throw new Error(language === 'tr' ? `API HatasÄ±: ${response.status}` : `API Error: ${response.status}`);
              }

              const result = await response.json();
              if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                setGeneratedRecipe(text);
              } else {
                setModalContent(language === 'tr' ? "Tarif oluÅŸturulurken bir sorun oluÅŸtu. LÃ¼tfen tekrar deneyin." : "There was a problem generating the recipe. Please try again.");
                setShowModal(true);
              }
            } catch (error) {
              console.error("Tarif oluÅŸturma hatasÄ±:", error);
              setModalContent(language === 'tr' ? `Tarif oluÅŸturulurken bir hata oluÅŸtu: ${error.message}` : `An error occurred while generating the recipe: ${error.message}`);
              setShowModal(true);
            } finally {
              setIsGeneratingRecipe(false);
            }
          };

          // Malzeme deÄŸiÅŸikliÄŸi Ã¶nerme fonksiyonu
          const suggestIngredientSubstitution = async () => {
            if (!foodNameForSubstitution.trim() || !oldIngredient.trim()) {
              setModalContent(language === 'tr' ? "LÃ¼tfen yemek adÄ±nÄ± ve deÄŸiÅŸtirmek istediÄŸiniz malzemeyi girin." : "Please enter the food name and the ingredient you want to substitute.");
              setShowModal(true);
              return;
            }

            setIsSuggestingSubstitution(true);
            setSuggestedSubstitutions('');

            const prompt = language === 'tr' ?
                `Bana '${foodNameForSubstitution}' yemeÄŸindeki '${oldIngredient}' yerine kullanabileceÄŸim 3-5 tane alternatif malzeme Ã¶ner. Sadece alternatifleri virgÃ¼lle ayÄ±rarak listele.` :
                `Suggest 3-5 alternative ingredients I can use instead of '${oldIngredient}' in the dish '${foodNameForSubstitution}'. List only the alternatives, separated by commas.`;


            try {
              let chatHistory = [];
              chatHistory.push({ role: "user", parts: [{ text: prompt }] });
              const payload = { contents: chatHistory };
              const apiKey = ""; 
              const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

              const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });
              
              if (!response.ok) {
                const errorResult = await response.json();
                console.error("API Error:", errorResult);
                throw new Error(language === 'tr' ? `API HatasÄ±: ${response.status}` : `API Error: ${response.status}`);
              }

              const result = await response.json();
              if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                setSuggestedSubstitutions(text);
              } else {
                setModalContent(language === 'tr' ? "Malzeme deÄŸiÅŸimi Ã¶nerilirken bir sorun oluÅŸtu. LÃ¼tfen tekrar deneyin." : "There was a problem suggesting ingredient substitutions. Please try again.");
                setShowModal(true);
              }
            } catch (error) {
              console.error("Malzeme deÄŸiÅŸimi Ã¶nerisi hatasÄ±:", error);
              setModalContent(language === 'tr' ? `Malzeme deÄŸiÅŸimi Ã¶nerilirken bir hata oluÅŸtu: ${error.message}` : `An error occurred while suggesting ingredient substitutions: ${error.message}`);
              setShowModal(true);
            } finally {
              setIsSuggestingSubstitution(false);
            }
          };

          // Temaya gÃ¶re yemek fikri alma fonksiyonu
          const getMealIdeaByTheme = async () => {
            if (!theme.trim()) {
              setModalContent(language === 'tr' ? "LÃ¼tfen bir tema girin." : "Please enter a theme.");
              setShowModal(true);
              return;
            }

            setIsGeneratingMealIdeas(true);
            setMealIdeasByTheme('');

            const prompt = language === 'tr' ?
                `Bana '${theme}' temasÄ±na uygun 3-5 tane yemek fikri Ã¶ner. Her bir fikri kÄ±sa bir aÃ§Ä±klama ile sun. Fikirleri Markdown listesi olarak formatla.` :
                `Suggest 3-5 meal ideas suitable for the theme '${theme}'. Present each idea with a brief description. Format the ideas as a Markdown list.`;

            try {
              let chatHistory = [];
              chatHistory.push({ role: "user", parts: [{ text: prompt }] });
              const payload = { contents: chatHistory };
              const apiKey = ""; 
              const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

              const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              });

              if (!response.ok) {
                const errorResult = await response.json();
                console.error("API Error:", errorResult);
                throw new Error(language === 'tr' ? `API HatasÄ±: ${response.status}` : `API Error: ${response.status}`);
              }

              const result = await response.json();
              if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                setMealIdeasByTheme(text);
              } else {
                setModalContent(language === 'tr' ? "Yemek fikirleri oluÅŸturulurken bir sorun oluÅŸtu. LÃ¼tfen tekrar deneyin." : "There was a problem generating meal ideas. Please try again.");
                setShowModal(true);
              }
            } catch (error) {
              console.error("Yemek fikri oluÅŸturma hatasÄ±:", error);
              setModalContent(language === 'tr' ? `Yemek fikirleri oluÅŸturulurken bir hata oluÅŸtu: ${error.message}` : `An error occurred while generating meal ideas: ${error.message}`);
              setShowModal(true);
            } finally {
              setIsGeneratingMealIdeas(false);
            }
          };


          return (
            <div className="flex flex-col items-center p-4 sm:p-6 bg-white/80 backdrop-blur-sm rounded-xl shadow-xl animate-fade-in-up">
              <h2 className="text-2xl sm:text-3xl font-bold text-orange-600 mb-6">{language === 'tr' ? 'AkÄ±llÄ± Asistan âœ¨' : 'Smart Assistant âœ¨'}</h2>

              <div className="mb-8 w-full max-w-md bg-green-50/70 backdrop-blur-sm p-4 sm:p-6 rounded-lg shadow-lg border border-green-200/50">
                <h3 className="text-xl sm:text-2xl font-bold text-green-700 mb-4 text-center">{language === 'tr' ? 'Malzemelerle Tarif OluÅŸtur' : 'Generate Recipe with Ingredients'}</h3>
                <label htmlFor="ingredientsInput" className="block text-gray-700 text-lg font-semibold mb-3">
                  {language === 'tr' ? 'Elinizdeki malzemeler:' : 'Ingredients you have:'}
                </label>
                <input
                  type="text"
                  id="ingredientsInput"
                  value={ingredients}
                  onChange={(e) => setIngredients(e.target.value)}
                  placeholder={language === 'tr' ? "Ã¶rn: domates, yumurta, soÄŸan" : "e.g., tomato, egg, onion"}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mb-4 shadow-sm"
                />
                <button
                  onClick={generateRecipeFromIngredients}
                  className="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white px-8 py-4 rounded-full text-lg sm:text-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center"
                  disabled={isGeneratingRecipe}
                >
                  {isGeneratingRecipe ? (
                    <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                  ) : (
                    (language === 'tr' ? 'Tarif OluÅŸtur âœ¨' : 'Generate Recipe âœ¨')
                  )}
                </button>
                {generatedRecipe && (
                  <div className="mt-6 p-4 bg-yellow-50/70 backdrop-blur-sm rounded-lg border border-yellow-200/50 shadow-md">
                    <h4 className="text-lg sm:text-xl font-bold text-yellow-700 mb-2">{language === 'tr' ? 'OluÅŸturulan Tarif:' : 'Generated Recipe:'}</h4>
                    <div className="prose prose-sm sm:prose max-w-none text-gray-700" dangerouslySetInnerHTML={{ __html: generatedRecipe.replace(/\n/g, '<br/>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>') }} />
                  </div>
                )}
              </div>

              <div className="mb-8 w-full max-w-md bg-purple-50/70 backdrop-blur-sm p-4 sm:p-6 rounded-lg shadow-lg border border-purple-200/50">
                <h3 className="text-xl sm:text-2xl font-bold text-purple-700 mb-4 text-center">{language === 'tr' ? 'Malzeme DeÄŸiÅŸikliÄŸi Ã–ner' : 'Suggest Ingredient Substitution'}</h3>
                <label htmlFor="foodNameSubInput" className="block text-gray-700 text-lg font-semibold mb-3">
                  {language === 'tr' ? 'Yemek AdÄ±:' : 'Food Name:'}
                </label>
                <input
                  type="text"
                  id="foodNameSubInput"
                  value={foodNameForSubstitution}
                  onChange={(e) => setFoodNameForSubstitution(e.target.value)}
                  placeholder={language === 'tr' ? "Ã¶rn: Lazanya" : "e.g., Lasagna"}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-3 shadow-sm"
                />
                <label htmlFor="oldIngredientInput" className="block text-gray-700 text-lg font-semibold mb-3">
                  {language === 'tr' ? 'DeÄŸiÅŸtirilecek Malzeme:' : 'Ingredient to Substitute:'}
                </label>
                <input
                  type="text"
                  id="oldIngredientInput"
                  value={oldIngredient}
                  onChange={(e) => setOldIngredient(e.target.value)}
                  placeholder={language === 'tr' ? "Ã¶rn: Parmesan Peyniri" : "e.g., Parmesan Cheese"}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 mb-4 shadow-sm"
                />
                <button
                  onClick={suggestIngredientSubstitution}
                  className="w-full bg-gradient-to-r from-purple-500 to-indigo-500 text-white px-8 py-4 rounded-full text-lg sm:text-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center"
                  disabled={isSuggestingSubstitution}
                >
                  {isSuggestingSubstitution ? (
                    <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                  ) : (
                    (language === 'tr' ? 'Alternatif Ã–ner âœ¨' : 'Suggest Alternative âœ¨')
                  )}
                </button>
                {suggestedSubstitutions && (
                  <div className="mt-6 p-4 bg-yellow-50/70 backdrop-blur-sm rounded-lg border border-yellow-200/50 shadow-md">
                    <h4 className="text-lg sm:text-xl font-bold text-yellow-700 mb-2">{language === 'tr' ? 'Ã–nerilen Alternatifler:' : 'Suggested Alternatives:'}</h4>
                    <p className="text-gray-700">{suggestedSubstitutions}</p>
                  </div>
                )}
              </div>

              <div className="mb-8 w-full max-w-md bg-red-50/70 backdrop-blur-sm p-4 sm:p-6 rounded-lg shadow-lg border border-red-200/50">
                <h3 className="text-xl sm:text-2xl font-bold text-red-700 mb-4 text-center">{language === 'tr' ? 'Temaya GÃ¶re Yemek Fikri Al' : 'Get Meal Idea by Theme'}</h3>
                <label htmlFor="themeInput" className="block text-gray-700 text-lg font-semibold mb-3">
                  {language === 'tr' ? 'Tema (Ã¶rn: Romantik AkÅŸam YemeÄŸi, HÄ±zlÄ± Ã–ÄŸle YemeÄŸi):' : 'Theme (e.g., Romantic Dinner, Quick Lunch):'}
                </label>
                <input
                  type="text"
                  id="themeInput"
                  value={theme}
                  onChange={(e) => setTheme(e.target.value)}
                  placeholder={language === 'tr' ? "Ã¶rn: SaÄŸlÄ±klÄ± ve Hafif" : "e.g., Healthy and Light"}
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 mb-4 shadow-sm"
                />
                <button
                  onClick={getMealIdeaByTheme}
                  className="w-full bg-gradient-to-r from-red-500 to-orange-500 text-white px-8 py-4 rounded-full text-lg sm:text-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 flex items-center justify-center"
                  disabled={isGeneratingMealIdeas}
                >
                  {isGeneratingMealIdeas ? (
                    <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                  ) : (
                    (language === 'tr' ? 'Fikir Al âœ¨' : 'Get Ideas âœ¨')
                  )}
                </button>
                {mealIdeasByTheme && (
                  <div className="mt-6 p-4 bg-yellow-50/70 backdrop-blur-sm rounded-lg border border-yellow-200/50 shadow-md">
                    <h4 className="text-lg sm:text-xl font-bold text-yellow-700 mb-2">{language === 'tr' ? 'Yemek Fikirleri:' : 'Meal Ideas:'}</h4>
                    <div className="prose prose-sm sm:prose max-w-none text-gray-700" dangerouslySetInnerHTML={{ __html: mealIdeasByTheme.replace(/\n/g, '<br/>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>') }} />
                  </div>
                )}
              </div>

              {showModal && (
                <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in">
                  <div className="bg-white rounded-lg shadow-xl p-6 max-w-sm w-full text-center animate-fade-in-up">
                    <p className="text-lg font-semibold text-gray-800 mb-4">{modalContent}</p>
                    <button
                      onClick={() => setShowModal(false)}
                      className="bg-orange-500 text-white px-5 py-2 rounded-md hover:bg-orange-600 transition-colors"
                    >
                      {language === 'tr' ? 'Tamam' : 'OK'}
                    </button>
                  </div>
                </div>
              )}
            </div>
          );
        };

        // UygulamayÄ± FirebaseProvider ile sarmala
        const WrappedApp = () => (
            <FirebaseProvider>
                <App />
            </FirebaseProvider>
        );

        ReactDOM.render(<WrappedApp />, document.getElementById('root'));
    </script>
</body>
</html>
 